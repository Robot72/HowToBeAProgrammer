# Как управлять памятью
[//]: # (Version:1.0.0)
Память - это драгоценный ресурс, который Вы не можете позволять себе исчерпать. Вы можете игнорировать этот ресурс некоторое время, но в конечном счете Вы будете должны решать как управлять памятью.

Место(пространство памяти) которое необходимо выделить за рамки места подпрограммы часто называют *heap allocated* (выделенная куча). Кусок памяти, к которому нет обращений является бесполезным, его часто называют *gorbage* (мусор). В зависимости от используемой системы Вам, возможно, придется явно освободить память, когда она собирается превратиться в мусор. Чаще всего вы можете использовать систему, которая предоставляет *gorbage collector* (сборщик мусора). Сборщик мусора замечает мусор и освобождает свое пространство без каких-либо действий, требуемых от программиста. Сбор мусора хорош: он сильно уменьшает количество ошибок и значительно сокращает количество кода.

Но даже со сборщиком мусора вы можете заполнить всю память мусором. Классическая ошибка чаще всего встречается при использовании хэш-таблицы в качестве кеша и в ситуации забывания программистом произвести  удаление ссылки в хеш-таблице. Поскольку ссылка остается, данные не удаляются, и при этом являются бесполезными. Это называют - *memory leak* (утечка памяти). Вы должны искать и исправлять утечки памяти на ранних стадиях проекта. Если у вас уже давно включена в работу системная память, то при тестировании оня врядли будет исчерпана, но будет она обязательно закончиться при работе пользователей.

Создание новых объектов в любой системе умеренно дорого. Однако память, выделенная непосредственно в локальных переменных(простых структур данных) подпрограммы, обычно дешева, потому что политика ее освобождения может быть очень простой. Вы должны избегать ненужного создания объекта.

Важный случай возникает, когда вы можете определить верхнюю границу количества объектов, которые вам понадобятся за один раз. Если эти объекты занимают одинаковый объем памяти, вы можете выделить один блок памяти или буфер для их хранения. Объекты, которые вам нужны, могут быть выделены и выпущены внутри этого буфера в заданном шаблоне вращения, поэтому его иногда называют кольцевым буфером. Это обычно быстрее, чем распределение кучи.

В некоторых случаях Вам необходимо явно освободить выделенное пространство, чтобы его можно было перераспределить, а не полагаться на сборку мусора. Затем Вы должны применить большую внимательность к каждому фрагменту выделенной памяти и разработать способ его освобождения в соответствующее время. Метод может отличаться для каждого типа создаваемого Вами объекта. Вы должны убедиться, что при каждом выполнении операции выделения памяти, в конечном итоге, выполняется операция освобождения памяти. Это настолько сложно, что программисты часто просто реализуют примитивную форму сбора мусора, такую как подсчет ссылок, на основе чего применяется решение об освождении памяти.

Далее [Как бороться с прерывистыми ошибками](10-How-to-Deal-with-Intermittent-Bugs.md)
